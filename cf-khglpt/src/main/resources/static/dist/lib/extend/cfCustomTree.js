layui.define("jquery",function(a){var d=layui.$,e=layui.hint;var b="layui-tree-enter",f=function(g){this.options=d.extend({},g,{elemCache:[]})};var c={arrow:["&#xe623;","&#xe625;"],checkbox:["&#xe626;","&#xe627;"],radio:["&#xe62b;","&#xe62a;"],branch:["&#xe622;","&#xe624;"],leaf:"&#xe621;"};f.prototype.init=function(h){var g=this;h.addClass("layui-box layui-tree");if(g.options.skin){h.addClass("layui-tree-skin-"+g.options.skin)}h.on("click",function(i){i.stopPropagation()});g.tree(h);g.on(h)};f.prototype.tree=function(k,i){var j=this,h=j.options;var g=i||h.nodes;layui.each(g,function(m,o){var p=o.children&&o.children.length>0;var n=d('<ul class="'+(o.spread?"layui-show":"")+'"></ul>');var l=d(["<li "+(o.spread?'data-spread="'+o.spread+'"':"")+">",function(){return p?'<i class="layui-icon layui-tree-spread">'+(o.spread?c.arrow[1]:c.arrow[0])+"</i>":""}(),function(){return h.check?('<i class="layui-icon layui-tree-check">'+(h.check==="checkbox"?c.checkbox[0]:(h.check==="radio"?c.radio[0]:""))+"</i>"):""}(),function(){return'<a href="'+(o.href||"javascript:;")+'" '+(h.target&&o.href?'target="'+h.target+'"':"")+">"+('<i class="layui-icon layui-tree-'+(p?"branch":"leaf")+'">'+(p?(o.spread?c.branch[1]:c.branch[0]):c.leaf)+"</i>")+("<cite>"+(o.name||"未命名")+"</cite></a>")}(),"</li>"].join(""));if(p){l.append(n);j.tree(n,o.children)}k.append(l);if(o.id===h.defaultValue){j.selectedElem=l.children("a");l.children("a").addClass("cf-select-style")}typeof h.click==="function"&&j.click(l,o);j.spread(l,o);h.drag&&j.drag(l,o);h.elemCache.push({name:o.name,elem:l})})};f.prototype.click=function(j,i){var h=this,g=h.options;j.children("a").on("click",function(l){layui.stope(l);if(h.selectedElem){d(h.selectedElem).removeClass("cf-select-style")}var k=this;d(k).addClass("cf-select-style");h.selectedElem=k;g.click(i)})};f.prototype.removeSelectedStyle=function(){var g=this;if(g.selectedElem){d(g.selectedElem).removeClass("cf-select-style")}g.selectedElem=null};f.prototype.changeSearchKey=function(i){var h=this;var g=h.options;var j=g.elemCache;h.closeAllNode();if(i==""){return}j.forEach(function(k){if(k.name.indexOf(i)>=0){h.openSelectedNode(k.elem)}})};f.prototype.openSelectedNode=function(j){var i=this;var l=j.parent().parent();if(l[0].tagName=="LI"){var k=l.children(".layui-tree-spread");var h=l.children("ul"),g=l.children("a");l.data("spread",true);h.addClass("layui-show");k.html(c.arrow[1]);g.find(".layui-icon").html(c.branch[1]);i.openSelectedNode(l)}};f.prototype.closeAllNode=function(){var g=this;g.options.elemCache.forEach(function(j){var l=j.elem.parent().parent();if(l[0].tagName=="LI"){var k=l.children(".layui-tree-spread");var i=l.children("ul"),h=l.children("a");if(l.data("spread")){l.data("spread",null);i.removeClass("layui-show");k.html(c.arrow[0]);h.find(".layui-icon").html(c.branch[0])}}})};f.prototype.spread=function(m,l){var k=this,i=k.options;var n=m.children(".layui-tree-spread");var j=m.children("ul"),g=m.children("a");var h=function(){if(m.data("spread")){m.data("spread",null);j.removeClass("layui-show");n.html(c.arrow[0]);g.find(".layui-icon").html(c.branch[0])}else{m.data("spread",true);j.addClass("layui-show");n.html(c.arrow[1]);g.find(".layui-icon").html(c.branch[1])}};if(!j[0]){return}n.on("click",h);g.on("dblclick",h)};f.prototype.on=function(i){var h=this,g=h.options;var j="layui-tree-drag";i.find("i").on("selectstart",function(k){return false});if(g.drag){d(document).on("mousemove",function(n){var k=h.move;if(k.from){var o=k.to,l=d('<div class="layui-box '+j+'"></div>');n.preventDefault();d("."+j)[0]||d("body").append(l);var m=d("."+j)[0]?d("."+j):l;(m).addClass("layui-show").html(k.from.elem.children("a").html());m.css({left:n.pageX+10,top:n.pageY+10})}}).on("mouseup",function(){var k=h.move;if(k.from){k.from.elem.children("a").removeClass(b);k.to&&k.to.elem.children("a").removeClass(b);h.move={};d("."+j).remove()}})}};f.prototype.move={};f.prototype.drag=function(l,k){var j=this,h=j.options;var g=l.children("a"),i=function(){var n=d(this),m=j.move;if(m.from){m.to={item:k,elem:l};n.addClass(b)}};g.on("mousedown",function(){var m=j.move;m.from={item:k,elem:l}});g.on("mouseenter",i).on("mousemove",i).on("mouseleave",function(){var n=d(this),m=j.move;if(m.from){delete m.to;n.removeClass(b)}})};a("cfCustomTree",function(h){var g=new f(h=h||{});var i=d(h.elem);if(!i[0]){return false}g.init(i);return g})});